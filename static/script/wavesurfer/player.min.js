import EventEmitter from"./event-emitter.js";class Player extends EventEmitter{constructor(e){super(),e.media?this.media=e.media:this.media=document.createElement("audio"),e.autoplay&&(this.media.autoplay=!0),null!=e.playbackRate&&(this.media.playbackRate=e.playbackRate)}onMediaEvent(e,t,i){return this.media.addEventListener(e,t,i),()=>this.media.removeEventListener(e,t)}onceMediaEvent(e,t){return this.onMediaEvent(e,t,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){var e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}setSrc(e,t){this.getSrc()!==e&&(this.revokeSrc(),t=t instanceof Blob?URL.createObjectURL(t):e,this.media.src=t,this.media.load())}destroy(){this.media.pause(),this.revokeSrc(),this.media.src="",this.media.load()}play(){return this.media.play()}pause(){this.media.pause()}isPlaying(){return 0<this.media.currentTime&&!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=e}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}setPlaybackRate(e,t){null!=t&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}export default Player;